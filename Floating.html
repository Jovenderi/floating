<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Floating Banner Code Generator</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding: 20px;
    max-width: 1000px;
    margin: auto;
    background-color: #f5f5f5;
    color: #333;
    transition: background-color 0.3s, color 0.3s;
  }

  h2 { text-align: center; margin-bottom: 20px; color: #ff6a00; }

  .row { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 12px; }
  .row label { flex-basis: 100%; font-weight: 600; margin-bottom: 4px; }
  .row input[type="text"], .row select {
    flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 6px; font-size: 14px;
    transition: border-color 0.3s;
  }
  .row input[type="text"]:focus, .row select:focus { border-color: #ff6a00; outline: none; }

  .preview-container {
  display: flex;
  width: 100%;
  gap: 20px;
  margin-top: 20px; 
}

.code-column
	{
  flex: 1;
  max-width: 70%;
}
	
.image-column {
  flex: 1;
  max-width: 30%;
}

textarea {
  width: 100%;
  height: 300px;
  font-family: monospace;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
  background-color: #fff8f0;
  resize: none;
}

.image-column img {
  width: 100%;
  height: auto;
  border: 2px solid #ff6a00;
  border-radius: 6px;
  display: block;
}

  button {
    padding: 10px 20px; margin-top: 10px; background-color: #ff6a00;
    border: none; border-radius: 6px; color: #fff; font-weight: bold;
    cursor: pointer; transition: background-color 0.3s;
  }
  button:hover { background-color: #e05a00; }

  .image-column { flex: 1; min-width: 300px; text-align: center; }
  .image-column img { max-width: 100%; border: 2px solid #ff6a00; border-radius: 6px; }

  body.dark { background-color: #1e1e1e; color: #ccc; }
  body.dark textarea { background-color: #333; color: #fff; }
  body.dark input[type="text"], body.dark select { background-color: #2b2b2b; color: #fff; border-color: #555; }
  body.dark button { background-color: #ff6a00; }

  .dark-mode-toggle { display: flex; justify-content: flex-end; margin-bottom: 15px;
    gap: 6px; cursor: pointer; font-weight: 600; color: #ff6a00; }
</style>
</head>

<body>

<div class="dark-mode-toggle" onclick="toggleDarkMode()">
  <span>ðŸŒ™ Dark Mode</span>
  <input type="checkbox" id="darkModeCheckbox">
</div>

<h2>Floating Banner Code Generator</h2>

<!-- Inputs Row -->
<div class="row">
  <div style="flex:2; display:flex; flex-direction:column;">
    <label>Game Name</label>
    <input type="text" id="gameName" placeholder="Enter game name" oninput="updateAll()">
  </div>

  <div style="flex:1; display:flex; flex-direction:column;">
    <label>Game Code</label>
    <input type="text" id="gameCode" placeholder="Enter code" oninput="updateAll()">
  </div>

  <div style="flex:1; display:flex; flex-direction:column;">
    <label>Type</label>
    <select id="type" onchange="updateProviders(); updateAll()">
      <option value="Casino">Casino</option>
      <option value="Live">Live Casino</option>
      <option value="Chess">Chess</option>
      <option value="Lotto">Lotto</option>
      <option value="Esports">Esports</option>
    </select>
  </div>

  <div style="flex:1; display:flex; flex-direction:column;">
    <label>Provider</label>
    <select id="provider" onchange="updateAll()"></select>
  </div>
</div>

<!-- NEW: Advert Name -->
<div class="row">
  <div style="flex:1; display:flex; flex-direction:column;">
    <label>Advert Name</label>
    <input type="text" id="advertName">
  </div>
</div>

<label>
  <input type="checkbox" id="addLoginIf" onchange="updateAll()"> After Login Only
</label>

<div class="preview-container">
  <div class="code-column">
    <textarea id="output" readonly></textarea>
    <button onclick="copyCode()">Copy Code</button>
  </div>

  <div class="image-column">
    <img id="preview" src="">
  </div>
</div>

<script>
/* ---------- PROVIDER LIST ---------- */
const providersByType = {
  Casino: ['advantplay','betsoft','bigtimegaming','evolution','featured','floatingbanner','funkygames','galaxsys','genesis','habanero','hacksaw','isoftbet','jili','leap','mgplus','microgaming','netent','new-years-rising','nextspin','nolimitcity','originals','pgsoft','playngo','playngo1','playtech','playtech1','pocketgames','pragmatic','producthighlightstest','quickspin','redtiger','skywind','slotmill','spribe','spribe1'],
  Live: ['Bull-Bull','Bull-Fight','FanTan','aesexy','agiledeal','asiagaming','baccarat','db','dblive','evolution','ezugi','featured','n2live','oncasino','playace','pragmatic','sexybaccarat','teenpatti','threecardwin','threepictures','wmcasino','worldentertainment','zodiacracing'],
  Chess: ['jili','kaiyuan','kingmidas','mpoker','v8poker'],
  Lotto: ['7star','agiledeal','agilenbg','australia','australialucky28','canada','india-lottery','keno','ladder','lotto','lucky28','lucky5','new-lobby','p3','pk10','rapid5d','sea-lottery','sode','super-lottery','tc-gaming','tcg_cn','tcg_sea','tcg_vn','xj'],
  Esports: ['Option 7','Option 8','Option 9']
};

/* ---------- PREFIX FOR ADVERT ---------- */
const typePrefix = {
  Casino: "csn",
  Live: "lcsn",
  Chess: "chess",
  Lotto: "lotto",
  Esports: "esp"
};

/* ---------- SLUGIFY ---------- */
function slugify(text) {
  return text.toLowerCase().trim().replace(/\s+/g, '-');
}

/* ---------- PROVIDER UPDATE ---------- */
function updateProviders() {
  const type = document.getElementById('type').value;
  const providerSelect = document.getElementById('provider');
  providerSelect.innerHTML = "";

  providersByType[type].forEach(p => {
    const opt = document.createElement("option");
    opt.value = p;
    opt.textContent = p;
    providerSelect.appendChild(opt);
  });
}

/* ---------- ADVERT NAME GENERATION ---------- */
function updateAdvertName() {
  const type = document.getElementById("type").value;
  const game = slugify(document.getElementById("gameName").value);
  const advertInput = document.getElementById("advertName");

  const prefix = typePrefix[type];

  // Calculate NEXT MONTH (MMYY)
  let now = new Date();
  let nextMonth = now.getMonth() + 2;
  let year = now.getFullYear();

  if (nextMonth > 12) {
    nextMonth = 1;
    year += 1;
  }

  const MM = String(nextMonth).padStart(2, "0");
  const YY = String(year).slice(-2);

  const advert = `${prefix}-fb-${game}-${MM}${YY}`;

  // Apply only when user has NOT typed manually
  if (!advertInput.dataset.manualEdit) {
    advertInput.value = advert;
  }
}

/* ---------- CODE GENERATION ---------- */
function updateCode() {
  const gameName = document.getElementById("gameName").value;
  const gameCode = document.getElementById("gameCode").value;
  const type = document.getElementById("type").value;
  const provider = document.getElementById("provider").value;
  const isLogin = document.getElementById("addLoginIf").checked;

  const slug = slugify(gameName);
  const img = gameName
      ? `https://doc.188contents.com/taptap-content/images/${type}/${provider}/${slug}/${slug}.gif`
      : "";

  const loginAttr = isLogin ? ` v-if="uv.sessionD.login"` : "";

  const code =
`<FloatingBanner${loginAttr}>
  <GameLauncher v-slot="{ openGame }" product="${type}" game="${gameCode}" 
    data-track-content data-content-name="Floating banner - (PD-${type})"
    data-content-piece="Floating banner">
    <img alt="${slug}" src="${img}" @click="openGame()"/>
  </GameLauncher>
</FloatingBanner>`;

  document.getElementById("output").value = code;
  document.getElementById("preview").src = img;
}

/* ---------- MAIN UPDATE CALL ---------- */
function updateAll() {
  updateAdvertName();
  updateCode();
}

/* ---------- COPY BUTTON ---------- */
function copyCode() {
  const txt = document.getElementById("output");
  txt.select();
  navigator.clipboard.writeText(txt.value).then(() =>
    alert("Code copied!")
  );
}

/* ---------- DARK MODE ---------- */
function toggleDarkMode() {
  document.body.classList.toggle("dark");
  document.getElementById("darkModeCheckbox").checked =
      document.body.classList.contains("dark");
}

/* ---------- MANUAL EDIT DETECTOR ---------- */
document.getElementById("advertName").addEventListener("input", function () {
  if (this.value.trim() === "") {
    delete this.dataset.manualEdit;  // allow auto-update again
  } else {
    this.dataset.manualEdit = true;  // stop auto-update
  }
});

/* ---------- INIT ---------- */
updateProviders();
updateAll();
</script>

</body>
</html>
